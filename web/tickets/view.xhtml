<ui:composition xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:u="http://code.google.com/p/ada-asf/util"
                xmlns:awa="http://code.google.com/p/ada-awa/jsf"
                template="/WEB-INF/layouts/layout.xhtml">
    <ui:param name="title" value="#{ticketMsg.tickets_page_title}" />
    <ui:param name="pageStyle" value="awax"/>

    <!-- Main page body -->
    <ui:define name="pageBody">
        <f:metadata>
            <f:viewAction action='#{ticket.load}'/>
        </f:metadata>
        <div id='awa-content'>
            <ui:include src="/tickets/views/ticket-nav.xhtml">
                <ui:param name="project_id" value="#{ticket.project_id}"/>
                <ui:param name="sort" value="recent"/>
            </ui:include>
            <div class="ticket-title">
                <ul class="awa-page-actions">
                        <li>
                            <a class='awa-button' href="#{contextPath}/tickets/edit/#{ticket.id}">#{projectMsg.project_page_edit_label}</a>
                        </li>
                    <li>
                        <a class='awa-button' href="#{contextPath}/tickets/history/#{ticket.id}">#{projectMsg.project_page_history_label}</a>
                    </li>
                </ul>
                <h2>#{u:translate(ticketMsg,'ticket_ptype_',ticket.ticket_type)} #{ticket.id} - #{ticket.summary}</h2>
            </div>
            <awa:tagList value='#{ticket.tags}' id='qtags' styleClass="awa-tag-list tagedit-list"
                         tagLink="#{contextPath}/tickets/tags/#{tagName}"
                         var="tagName"
                         tagClass="tagedit-listelement tagedit-listelement-old"/>
            <dl class="ticket-info">
                <dt>Project</dt>
                <dd>
                    <a href="#{contextPath}/projects/view/#{ticket.project_id}">Project #{ticket.project_id}</a>
                </dd>
                <dt>Status:</dt>
                <dd>
                    #{u:translate(ticketMsg,'ticket_status_',ticket.status)}
                </dd>
                <dt>Created on</dt>
                <dd>
                    #{ticket.create_date}
                </dd>
                <dt>Last updated on</dt>
                <dd>#{ticket.update_date}
                </dd>
            </dl>
            <div class="ticket-info">
                <h3>Description</h3>
                <awa:wiki styleClass='wiki-text'
                          value="#{ticket.description}"
                          toc="false"/>
            </div>
        </div>
    </ui:define>
    <ui:define name="pageScript">
        <script type="text/javascript" src="#{jquery.chosenPath}"></script>
    </ui:define>

</ui:composition>
